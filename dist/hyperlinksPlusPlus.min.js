const config={urlTransformer:t=>t,errorHandler:t=>console.error(t),httpRequestDispatcher:async t=>{const e=await fetch(t);return{content:await e.text(),statusCode:e.status}}};export default config;function initialize(t){addClickListeners(t);let e=t.querySelectorAll('a[data-autoload][data-target]:not([data-target=""]), [data-default-target]:not([data-default-target=""]) a[data-autoload]');e.forEach(t=>t.click())}function addClickListeners(t){const e=t.querySelectorAll('a[data-target]:not([data-target=""])');e.forEach(t=>{t.addEventListener("click",handleClick)});const a=t.querySelectorAll('[data-default-target]:not([data-default-target=""])');a.forEach(e=>{const t=e.querySelectorAll("a:not([data-target])");t.forEach(t=>{t.setAttribute("data-target",e.getAttribute("data-default-target")),t.addEventListener("click",handleClick)})})}function handleClick(t){t.preventDefault();const e=t.target;t=e.getAttribute("data-target");history.pushState({targetElementSelector:t},"",e.href),tryLoadContent(e.href,t)}function tryLoadContent(t,e){try{loadContent(t,e)}catch(t){config.errorHandler(t)}}async function loadContent(t,e){var a=getTargetElement(t,e),n=config.urlTransformer(t),n=await config.httpRequestDispatcher(n);renderContentInsideTargetElement(a,n.content),initialize(a),dispatchContentLoadedEvent(a,{url:t,targetElementSelector:e,responseStatusCode:n.statusCode})}function getTargetElement(t,e){var a=document.querySelector(e);if(!a)throw new Error(`No element found for selector "${e}" to render response from ${t}`);return a}function renderContentInsideTargetElement(t,e){for(;t.lastChild;)t.removeChild(t.lastChild);t.insertAdjacentHTML("afterbegin",e)}function dispatchContentLoadedEvent(t,e){t.dispatchEvent(new CustomEvent("hlpp:load",{bubbles:!0,cancelable:!0,detail:e}))}window.addEventListener("popstate",t=>tryLoadContent(location.href,t.state.targetId)),initialize(document.body);