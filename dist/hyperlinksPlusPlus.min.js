"use strict";function initialize(t){addClickListeners(t);let e=t.querySelectorAll('a[data-autoload][data-target]:not([data-target=""])');e.forEach(t=>t.click())}function addClickListeners(t){const e=t.querySelectorAll('a[data-target]:not([data-target=""])'),n=(e.forEach(t=>{t.addEventListener("click",handleClick)}),t.querySelectorAll('[data-default-target]:not([data-default-target=""])'));n.forEach(e=>{const t=e.querySelectorAll("a:not([data-target])");t.forEach(t=>{t.setAttribute("data-target",e.getAttribute("data-default-target")),t.addEventListener("click",handleClick)})})}function handleClick(t){t.preventDefault();const e=t.target;t=e.getAttribute("data-target");history.pushState({targetElementSelector:t},"",e.href),tryLoadContent(e.href,t)}function tryLoadContent(t,e){try{loadContent(t,e)}catch(t){window.hyperlinksPlusPlusConfig.errorHandler(t)}}async function loadContent(t,e){var n=getTargetElement(t,e),a=window.hyperlinksPlusPlusConfig.urlTransformer(t),a=await window.hyperlinksPlusPlusConfig.httpRequestDispatcher(a),t=(renderContentInsideTargetElement(n,a.content),initialize(n),{url:t,targetElementSelector:e,responseStatusCode:a.statusCode});dispatchContentLoadedEvent(n,t)}function getTargetElement(t,e){var n=document.querySelector(e);if(n)return n;throw new Error(`No element found for selector "${e}" to render response from `+t)}function renderContentInsideTargetElement(t,e){for(;t.lastChild;)t.removeChild(t.lastChild);t.insertAdjacentHTML("afterbegin",e)}function dispatchContentLoadedEvent(t,e){t.dispatchEvent(new CustomEvent("hlpp:load",{bubbles:!0,cancelable:!0,detail:e}))}Object.defineProperty(exports,"__esModule",{value:!0}),window.hyperlinksPlusPlusConfig={urlTransformer:t=>t,errorHandler:t=>console.error(t),httpRequestDispatcher:async t=>{const e=await fetch(t);return{content:await e.text(),statusCode:e.status}}},window.addEventListener("popstate",t=>tryLoadContent(location.href,t.state.targetId)),initialize(document.body);