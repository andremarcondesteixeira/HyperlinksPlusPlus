"use strict";(()=>{function e(e){try{!async function(t){const e=t.getAttribute("data-target"),a=o(e),r=(c(a,window.dataTarget.config.loadingMessageElement().outerHTML),await(t instanceof HTMLAnchorElement?window.dataTarget.config.httpRequestDispatcher(t.href):async function(t){const e=t.method,a=new FormData(t);return"get"===e.toLowerCase()?async function(t,e){const a=Array.from(e.entries()),r=a.map(([t,e])=>e instanceof File?null:[t,e]).filter(t=>!!t),n=new URLSearchParams(Object.fromEntries(r));return window.dataTarget.config.httpRequestDispatcher(t.action+"?"+n)}(t,a):window.dataTarget.config.httpRequestDispatcher(t.action,{method:e,body:a})}(t))),n=(c(a,r.content),window.dataTarget.programmaticAccess._makeDataTargetAttributesWork(a),t instanceof HTMLAnchorElement?t.href:t.action);a.dispatchEvent(new CustomEvent("data-target:load",{bubbles:!0,cancelable:!0,detail:{url:n,targetElementId:e,responseStatusCode:r.statusCode}}))}(e)}catch(t){window.dataTarget.config.errorHandler(t,e)}}function o(t){var e=document.getElementById(t);if(null===e)throw new Error(`data-target: No target element found with ID "${t}"`);return e}function c(t,e){for(;t.lastChild;)t.removeChild(t.lastChild);t.insertAdjacentHTML("afterbegin",e)}window.dataTarget={config:{errorHandler:(t,e)=>console.error({error:t,element:e}),httpRequestDispatcher:async(t,e)=>{const a=await fetch(t,e);return{content:await a.text(),statusCode:a.status}},loadingMessageElement:()=>{const t=document.createElement("span");return t.innerText="loading",t}},programmaticAccess:{_dispatchRequestAndRenderResponse:async(t,e)=>{try{var a=await window.dataTarget.config.httpRequestDispatcher(t);c(o(e),a.content)}catch(t){window.dataTarget.config.errorHandler({error:t,programmaticAccess:!0})}},_makeDataTargetAttributesWork:t=>{t.querySelectorAll('a[data-target]:not([data-target=""])').forEach(t=>t.addEventListener("click",t=>{t.preventDefault(),e(t.currentTarget)})),t.querySelectorAll('form[data-target]:not([data-target=""])').forEach(t=>t.addEventListener("submit",t=>{t.preventDefault(),e(t.currentTarget)}))}}},Object.freeze(window.dataTarget.programmaticAccess),window.dataTarget.programmaticAccess._makeDataTargetAttributesWork(document.body)})();