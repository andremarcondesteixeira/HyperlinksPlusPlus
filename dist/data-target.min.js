"use strict";(()=>{function s(t,e){for(;t.lastChild;)t.removeChild(t.lastChild);t.insertAdjacentHTML("afterbegin",e.html)}window.dataTarget={config:{errorHandler:(t,e)=>console.error({error:t,urlOrInvokerElement:e}),httpRequestDispatcher:async(t,e)=>{const a=await fetch(t,e);return{content:await a.text(),statusCode:a.status}},loadingIndicator:()=>{const t=document.createElement("span");return t.innerText="loading",t}},request:async(e,t)=>{try{"string"==typeof e&&(e=new URL(e));{var a=e;var r={id:t};const n=function(t){var e=document.getElementById(t.id);if(null===e)throw new Error(`data-target: No target element found with ID "${t.id}"`);return e}(r),o=window.dataTarget.config.loadingIndicator(),i=o instanceof HTMLElement?o.outerHTML:o,{response:d,url:c}=(s(n,{html:i}),await async function(t){let e,a;if(t instanceof HTMLAnchorElement)e=new URL(t.href),a=await window.dataTarget.config.httpRequestDispatcher(e);else if(t instanceof HTMLFormElement){e=new URL(t.action);const n=t.method;var r=new FormData(t);a="get"===n.toLowerCase()?await function(t,e){const a=Array.from(e.entries()),r=a.map(([t,e])=>e instanceof File?null:[t,e]).filter(t=>!!t),n=new URLSearchParams(Object.fromEntries(r));return window.dataTarget.config.httpRequestDispatcher(t.action+"?"+n)}(t,r):await window.dataTarget.config.httpRequestDispatcher(e,{method:n,body:r})}else e=new URL(t.href),a=await window.dataTarget.config.httpRequestDispatcher(e);return{url:e,response:a}}(a));s(n,{html:d.content}),window.dataTarget.attach(n),n.dispatchEvent(new CustomEvent("data-target:load",{bubbles:!0,cancelable:!0,detail:{url:c.href,targetElementId:r.id,responseStatusCode:d.statusCode}}));return void await void 0}}catch(t){window.dataTarget.config.errorHandler(t,e)}},attach:t=>{t.querySelectorAll('a[data-target]:not([data-target=""])').forEach(e=>e.addEventListener("click",t=>{t.preventDefault(),window.dataTarget.request(e,e.getAttribute("data-target"))})),t.querySelectorAll('form[data-target]:not([data-target=""])').forEach(e=>e.addEventListener("submit",t=>{t.preventDefault(),window.dataTarget.request(e,e.getAttribute("data-target"))}))}},window.dataTarget.attach(document.body)})();