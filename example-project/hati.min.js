export function initialize(t,e=(()=>{})){getAnchors(t).forEach(n=>{n.addEventListener("click",a=>{e(n.href),tryLoadContent(a,n,t)})})}export function getAnchors(t){return t.querySelectorAll('a[data-target-id]:not([data-target-id=""])')}async function tryLoadContent(t,e,n){t.preventDefault();const a=getTargetElement(e,n);a?doLoadContent(e,a):console.error(`No element found with id: ${e.getAttribute("data-target-id")}`)}function getTargetElement(t,e){const n=t.getAttribute("data-target-id");return e.querySelector(`#${n}`)}async function doLoadContent(t,e){const n=await fetchContent(t);renderContentInTargetElement(e,n.content),initialize(e),dispatchContentLoadedEvent(e,{href:t.href,responseStatusCode:n.statusCode})}async function fetchContent(t){let e=await fetch(t.href);return{content:await e.text(),statusCode:e.status}}function renderContentInTargetElement(t,e){clearTargetElement(t),t.insertAdjacentHTML("afterbegin",e)}function clearTargetElement(t){for(;t.lastChild;)t.removeChild(t.lastChild)}function dispatchContentLoadedEvent(t,e){const n=new CustomEvent("hati:DOMContentLoaded",{bubbles:!0,cancelable:!0,detail:e});t.dispatchEvent(n)}
